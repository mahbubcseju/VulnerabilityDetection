#!/bin/bash
#SBATCH --nodes=1
#SBATCH --cpus-per-task=4
#SBATCH --mem=32G
#SBATCH --time=10:00:00
#SBATCH --output=/work/LAS/weile-lab/mdrahman/SliceLevelVulnerabilityDetection/jobs/logs/codes/code_runner_output_4.out
#SBATCH --error=/work/LAS/weile-lab/mdrahman/SliceLevelVulnerabilityDetection/jobs/logs/codes/code_runner_eror_4.err
#SBATCH --job-name="code_4"
#SBATCH --mail-user=mdrahman@iastate.edu
#SBATCH --mail-type=FAIL,END


#SBATCH --partition=biocrunch
#SBATCH --nodelist=biocrunch12

module load openjdk/1.8.0_222-b10-ipodmgy

export PYTHONPATH=/work/LAS/weile-lab/mdrahman/VulDet/py_joern/python-joern-0.3.1/:${PYTHONPATH}
export PYTHONPATH=/work/LAS/weile-lab/mdrahman/VulDet/py2neo-2.0/:${PYTHONPATH}
export  PYTHONPATH=/work/LAS/weile-lab/mdrahman/VulDet/py-igraph/:${PYTHONPATH}

path=/work/LAS/weile-lab/mdrahman/SliceLevelVulnerabilityDetection/data/Devign
cd $path

source /work/LAS/weile-lab/mdrahman/VulDet/GNN-ReGVD/env/bin/activate

python2 /work/LAS/weile-lab/mdrahman/SliceLevelVulnerabilityDetection/src/src2slice/get_cfg_relation.py
python2 /work/LAS/weile-lab/mdrahman/SliceLevelVulnerabilityDetection/src/src2slice/complete_PDG.py
python2 /work/LAS/weile-lab/mdrahman/SliceLevelVulnerabilityDetection/src/src2slice/access_db_operate.py --data data_4
